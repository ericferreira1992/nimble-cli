{"version":3,"file":"base-generate.js","sourceRoot":"","sources":["../../../src/options/generate/base-generate.ts"],"names":[],"mappings":"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","sourcesContent":["import { QuestionAnswer } from '../../core/question-answer.model';\nimport { CLI } from '../../cli';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport abstract class BaseGenerate {\n    protected name!: string;\n    protected get fileName() {\n        if (this.name.includes('/')) {\n            let splitted = this.name.split('/');\n            return splitted[splitted.length - 1];\n        }\n        return this.name;\n    }\n    protected get fileFriendlyName() {\n        let name = this.fileName;\n\n        if (name.includes('-'))\n            name = name.split('-').map((part) => part.charAt(0).toUpperCase() + part.slice(1)).join('');\n\n        if (name.includes('_'))\n            name = name.split('_').map((part) =>  + part.slice(1)).join('');\n\n        name = name[0].toUpperCase() + name.substr(1);\n        \n        return name;\n    }\n    protected get directories() {\n        if (this.name.includes('/')) {\n            let splitted = this.name.split('/');\n            return splitted.slice(0, splitted.length - 1);\n        }\n        return [];\n    }\n\n    constructor() {\n        this.execute();\n    }\n\n    protected getBaseFileInstructions() {\n        let fileInstructions = [\n        ] as any[];\n\n        let lastDirectory = null as any;\n\n        if (CLI.worksPathIsRootProject()) {\n            fileInstructions.push({\n                name: 'src',\n                children: [\n                    {\n                        name: 'app',\n                        children: [] as any[]\n                    }\n                ]\n            });\n            lastDirectory = fileInstructions[0].children[0];\n        }\n        else if (CLI.worksPathIsSourceDir()) {\n            fileInstructions.push({ name: 'app', children: [] as any[] });\n            lastDirectory = fileInstructions[0];\n        }\n\n        for(let dirName of this.directories) {\n            let dir = { name: dirName, children: [] };\n\n            if (lastDirectory)\n                lastDirectory.children.push(dir);\n            else\n                fileInstructions.push(dir);\n\n            lastDirectory = dir;\n        }\n\n        return { fileInstructions, lastDirectory };\n    }\n\n    protected replaceVariablesInContentFile(content: string) {\n        let regex = /\\[\\[(.|\\n)*?\\]\\]/g;\n        if (regex.test(content)) {\n            content = content.replace(regex, (name) => {\n                name = name.replace(/(^\\[\\[)|(\\]\\]$)/g, '');\n                if (name !== '')\n                    return this.getValueByName(name);\n\n                return '';\n            });\n        }\n\n        return content;\n    }\n\n    abstract async execute(): Promise<void>;\n    abstract question(): Promise<QuestionAnswer>;\n    abstract isValid(fileName: string): boolean;\n    abstract getValueByName(fname: string): string;\n}"]}