{"version":3,"file":"dialog-generate.js","sourceRoot":"","sources":["../../../../src/options/generate/dialog/dialog-generate.ts"],"names":[],"mappings":"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","sourcesContent":["import { inject, injectable } from 'inversify';\nimport inquirer from 'inquirer';\nimport { QuestionAnswer } from '../../../core/question-answer.model';\nimport { Logger } from '../../../utils/logger.util';\nimport { FileCreator } from '../../../core/file-creator/file-creator';\nimport { DIALOG_HTML, DIALOG_SCSS, DIALOG_TS } from './dialog-generate-template';\nimport { BaseGenerate } from '../base-generate';\n\n@injectable()\nexport class DialogGenerate extends BaseGenerate {\n\n    constructor(\n        @inject('Logger')  private logger: Logger\n    ) {\n        super();\n    }\n\n    public async execute() {\n        let answer: QuestionAnswer = await this.question();\n        let name = answer.value.trim().toLowerCase();\n\n        if (this.isValid(name)) {\n            this.name = name;\n\n            if (this.name.startsWith('/'))\n                this.name = this.name.substr(1);\n            if (this.name.endsWith('/'))\n                this.name = this.name.substr(0, this.name.length - 1);\n\n            await this.startCreateDialog();\n        }\n        else\n            await this.execute();\n    }\n\n    public question(): Promise<QuestionAnswer> {\n        return inquirer.prompt([{ \n            name: 'value',\n            type: 'input',\n            message: 'What is path and name? (ex.: dialogs/alert)',\n        }]);\n    };\n\n    public isValid(name: string): boolean {\n        if(name === '') {\n            this.logger.showError('Cannot be empty.');\n            return false;\n        }\n        if(name.includes(' ')) {\n            this.logger.showError('Cannot contains whitespace.');\n            return false;\n        }\n        if(/[!$%^&*()+|~=`{}\\[\\]:\";'<>?,.]/.test(name)) {\n            this.logger.showError('Cannot have the following symbols: !$%^&*()+|~=`{}\\[\\]:\";\\'<>?,.');\n            return false;\n        }\n\n        return true;\n    }\n\n    private async startCreateDialog() {\n        let creator = new FileCreator();\n        let { fileInstructions, lastDirectory } = this.getBaseFileInstructions();\n        \n        let fileDirInstruction = {\n            name: this.fileName,\n            children: [\n                { name: `${this.fileName}.dialog.html`, content: this.replaceVariablesInContentFile(DIALOG_HTML) },\n                { name: `${this.fileName}.dialog.scss`, content: this.replaceVariablesInContentFile(DIALOG_SCSS) },\n                { name: `${this.fileName}.dialog.ts`, content: this.replaceVariablesInContentFile(DIALOG_TS) },\n            ]\n        };\n\n        if (lastDirectory)\n            lastDirectory.children.push(fileDirInstruction);\n        else\n            fileInstructions.push(fileDirInstruction);\n\n        creator.initialize(fileInstructions);\n\n        await creator.startCreateFiles((response) => {\n            if (!response.error) {\n                this.logger.showCreated(response.fileInstruction.completePath());\n            }\n            else {\n                this.logger.showError(response.error);\n            }\n        });\n    }\n\n    public getValueByName(name: string){\n        switch(name) {\n            case 'Name':\n                return this.fileName;\n            case 'FriendlyName':\n                return this.fileFriendlyName;\n        }\n        return '';\n    }\n}"]}